var closeMap,closeContacts,nameField,emailField,messageField,nameStorage,emailStorage,btnBuy,buy,closeBuy,map=document.querySelector(".modal-map"),openMap=document.querySelector(".contacts__map"),contacts=document.querySelector(".modal-write"),contactsLink=document.querySelector(".contacts__link"),contactsForm=document.querySelector(".write-form"),isStorageSupport=!0,products=document.querySelector(".products__products--catalog"),overlay=document.querySelector(".overlay");try{closeMap=map.querySelector(".modal-close"),closeContacts=contacts.querySelector(".modal-close"),nameField=contacts.querySelector("[name=name]"),emailField=contacts.querySelector("[name=email]"),messageField=contacts.querySelector("[name=letter]");try{nameStorage=localStorage.getItem("nameField"),emailStorage=localStorage.getItem("emailField")}catch(e){isStorageSupport=!1}openMap.addEventListener("click",function(e){e.preventDefault(),map.classList.add("modal-show"),overlay.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal-show"),overlay.classList.remove("modal-show")}),contactsLink.addEventListener("click",function(e){e.preventDefault(),contacts.classList.add("modal-animation"),nameField.focus(),nameStorage&&emailStorage&&(nameField.value=nameStorage,emailField.value=emailStorage,messageField.focus()),overlay.classList.add("modal-show")}),contactsForm.addEventListener("submit",function(e){nameField.value&&emailField.value&&messageField.value?isStorageSupport&&(localStorage.setItem("nameField",nameField.value),localStorage.setItem("emailField",emailField.value)):(e.preventDefault(),contacts.classList.add("modal-error"),setTimeout(function(){contacts.classList.remove("modal-error"),contacts.classList.remove("modal-animation"),contacts.classList.add("modal-show")},700))}),closeContacts.addEventListener("click",function(e){e.preventDefault(),contacts.classList.remove("modal-animation"),contacts.classList.remove("modal-show"),contacts.classList.remove("modal-error"),overlay.classList.remove("modal-show")}),overlay.addEventListener("click",function(){map.classList.remove("modal-show"),contacts.classList.remove("modal-animation"),contacts.classList.remove("modal-show"),contacts.classList.remove("modal-error"),overlay.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),map.classList.contains("modal-show")?(map.classList.remove("modal-show"),overlay.classList.remove("modal-show")):(contacts.classList.contains("modal-animation")||contacts.classList.contains("modal-show"))&&(contacts.classList.remove("modal-animation"),contacts.classList.remove("modal-show"),contacts.classList.remove("modal-error"),overlay.classList.remove("modal-show")))})}catch(e){console.log("На этой странице есть код, который относится к странице index.html и здесь не выполняется")}try{btnBuy=products.querySelectorAll(".btn--buy"),closeBuy=(buy=document.querySelector(".modal-order")).querySelector(".order-close");for(var i=0;i<btnBuy.length;i++)btnBuy[i].addEventListener("click",function(e){e.preventDefault(),buy.classList.add("modal-show"),overlay.classList.add("modal-show")});closeBuy.addEventListener("click",function(e){e.preventDefault(),buy.classList.remove("modal-show"),overlay.classList.remove("modal-show")}),overlay.addEventListener("click",function(){buy.classList.remove("modal-show"),overlay.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),buy.classList.contains("modal-show")&&(buy.classList.remove("modal-show"),overlay.classList.remove("modal-show")))})}catch(e){console.log("На этой странице есть код, который относится к странице catalog.html и здесь не выполняется")}
