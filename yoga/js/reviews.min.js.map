{"version":3,"sources":["reviews.js"],"names":["monthMap","01","02","03","04","05","06","07","08","09","10","11","12","section","$","$slider","$reviewCardTemp","parseHTML","html","window","team","resetSocialCounter","makePaginationAll","$allPages","$slides","text","length","screen","width","util","screenWidth","MOB_MID","Math","ceil","InquiryParam","URL","ON_SUCCESS","makeItems","items","ON_ERROR","removeSection","MAKE_ITEM","reviewData","timeElement","timeData","day","month","year","imageElement","imageData","$reviewCard","clone","$ReviewParam","AUTHOR_NAME","find","TIME","AUTHOR_IMAGE","LINK_VK","LINK_TWITTER","TEXT","DESCRIPTION","makeText","authorName","time","substr","Number","attr","image","parent","remove","makeDescription","review","forEach","current","append","makeSocial","vk","twitter","counter","SECTION","LIST_CLASS","MAKE_SLIDER","slick","dots","prevArrow","nextArrow","infinite","accessibility","zIndex","speed","slidesToShow","slidesToScroll","responsive","breakpoint","settings","appendArrows","draggable","TAB_MAX","replaceClonedSocials","backend","getItems","on","evt","currentSlide","$currentPage","makePaginationCurrent","resize"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const REVIEWS_URL = 'https://b-612.github.io/json/yoga/reviews.json';\n  const monthMap = {\n    '01': 'января',\n    '02': 'февраля',\n    '03': 'марта',\n    '04': 'апреля',\n    '05': 'мая',\n    '06': 'июня',\n    '07': 'июля',\n    '08': 'августа',\n    '09': 'сентября',\n    '10': 'октября',\n    '11': 'ноября',\n    '12': 'декабря'\n  };\n\n  const section = $('.reviews');\n  const $slider = $('.reviews__slider');\n  const $reviewCardTemp = $.parseHTML($('#review').html());\n\n  const makeTime = (timeElement, timeData) => {\n    let day = timeData.substr(8);\n    const month = monthMap[timeData.substr(5, 2)];\n    const year = timeData.substr(0, 4);\n\n    if (Number(day[0]) === 0) {\n      day = day.substr(1, 1);\n    }\n\n    timeElement.attr('datetime', timeData);\n    timeElement.text(day + ' ' + month + ' ' + year);\n  };\n\n  const makeAuthorImage = (imageElement, imageData) => {\n    imageElement.attr('src', 'img/' + imageData + '@1x.jpg');\n    imageElement.attr('srcset', 'img/' + imageData + '@2x.jpg 2x');\n\n    $(imageElement.parent())\n      .find('source[type=\"image/webp\"]')\n      .attr('srcset', 'img/' + imageData + '@1x.webp 1x, img/' + imageData + '@2x.webp 2x');\n  };\n\n  window.team.resetSocialCounter();\n\n  var makeReview = (reviewData) => {\n    const $reviewCard = $($reviewCardTemp).clone();\n    const $ReviewParam = {\n      AUTHOR_NAME: $($reviewCard).find('.review__author-name'),\n      TIME: $($reviewCard).find('.review__time'),\n      AUTHOR_IMAGE: $($reviewCard).find('.review__avatar'),\n      LINK_VK: $($reviewCard).find('.review__social-link--vk'),\n      LINK_TWITTER: $($reviewCard).find('.review__social-link--twitter'),\n      TEXT: $($reviewCard).find('.review__text'),\n      DESCRIPTION: $($reviewCard).find('.review__paragraph')\n    };\n\n    window.items.makeText($ReviewParam.AUTHOR_NAME, reviewData.authorName);\n    makeTime($ReviewParam.TIME, reviewData.time);\n    makeAuthorImage($ReviewParam.AUTHOR_IMAGE, reviewData.image);\n    $($reviewCard).find('.review__paragraph').remove();\n    window.team.makeDescription(reviewData.review, $($ReviewParam.DESCRIPTION)[0]).forEach((current) => {\n      $ReviewParam.TEXT.append(current);\n    });\n    window.team.makeSocial($ReviewParam.LINK_VK, reviewData.vk, 'Вконтакте', 'reviews', reviewData.authorName);\n    window.team.makeSocial($ReviewParam.LINK_TWITTER, reviewData.twitter, 'в Твиттер', 'reviews', reviewData.authorName);\n    window.team.makeSocial.counter++;\n\n    return $($reviewCard)[0];\n  };\n\n  const makePaginationCurrent = (currentSlide) => {\n    const $currentPage = $('.reviews__nav-page--current');\n\n    if (screen.width >= window.util.screenWidth.MOB_MID && currentSlide >= 2) {\n      $currentPage.text(Math.ceil((currentSlide + 1) / 2));\n    } else {\n      $currentPage.text(currentSlide + 1);\n    }\n  };\n\n  const makePaginationAll = () => {\n    const $allPages = $('.reviews__nav-page--all');\n    const $slides = $('.reviews-slider__item-wrapper:not(.slick-cloned)');\n\n    $allPages.text($slides.length);\n\n    if (screen.width >= window.util.screenWidth.MOB_MID && $slides.length > 1) {\n      $allPages.text(Math.ceil($slides.length / 2));\n    } else {\n      $allPages.text($slides.length);\n    }\n  };\n\n  const makeReviewsSlider = () => {\n    $('.reviews-slider').slick({\n      dots: false,\n      prevArrow: '<button class=\"reviews__btn reviews__btn--prev slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Предыдущий отзыв</span></button>',\n      nextArrow: '<button class=\"reviews__btn reviews__btn--next slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Следующий отзыв</span></button>',\n      infinite: true,\n      accessibility: true,\n      zIndex: 1000,\n      speed: 300,\n      slidesToShow: 2,\n      slidesToScroll: 2,\n\n      responsive: [\n        {\n          breakpoint: window.util.screenWidth.MOB_MID,\n          settings: {\n            appendArrows: '.reviews__nav',\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            infinite: true,\n            dots: false,\n            draggable: true\n          }\n        },\n        {\n          breakpoint: window.util.screenWidth.TAB_MAX + 1,\n          settings: {\n            appendArrows: '.reviews__nav'\n          }\n        }\n      ]\n    });\n\n    window.team.replaceClonedSocials('reviews', $slider, 'review__social-icon');\n    makePaginationAll();\n  };\n\n  const InquiryParam = {\n    URL: REVIEWS_URL,\n    ON_SUCCESS: {\n      makeItems: window.items.makeItems\n    },\n    ON_ERROR: window.items.removeSection,\n    MAKE_ITEM: makeReview,\n    SECTION: section,\n    LIST_CLASS: 'reviews-slider',\n    MAKE_SLIDER: makeReviewsSlider\n  };\n\n  window.backend.getItems(InquiryParam);\n\n  $slider.on('afterChange', (evt, slick, currentSlide) => {\n    makePaginationCurrent(currentSlide);\n  });\n\n  $(window).resize(function () {\n    makePaginationAll();\n  });\n})();\n"],"file":"reviews.min.js"}