{"version":3,"sources":["items.js"],"names":["makeElemOrAttr","itemElem","dataElemArr","itemElemOrAttrArr","i","length","remove","makeText","element","data","text","makeHref","attr","makeSources","deviceVersions","imageData","imgFormats","sources","$","each","device","j","format","source","document","createElement","attributes","unshift","setImgAttr","imgElem","imgData","title","makeItemImage","picture","appendChild","makeItems","itemsData","makeItem","section","listClass","makeSlider","ANIMATION_TIME","itemsArgs","arguments","setTheBest","setItemsListeners","fragment","window","util","list","find","hasClass","screen","width","screenWidth","TAB_MIN","$itemsWrapper","addClass","$btnLookMore","href","firstItem","item","append","subscriptions","onTimeBtnClickCounter","listHeight","height","css","animate","opacity","empty","removeSection","items"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const makeElemOrAttr = (itemElem, dataElemArr, itemElemOrAttrArr) => {\n    for (let i = 0; i < dataElemArr.length; i++) {\n      if (dataElemArr[i]) {\n        itemElem[itemElemOrAttrArr[i]] = dataElemArr[i];\n      } else {\n        itemElem.remove();\n        break;\n      }\n    }\n  };\n\n  const makeText = (element, data) => {\n    if (data) {\n      element.text(data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeHref = (element, data) => {\n    if (data) {\n      element.attr('href', data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeSources = (deviceVersions, imageData, imgFormats) => {\n    if (imageData) {\n      const sources = [];\n\n      $.each(deviceVersions, function (i, device) {\n        $.each(imgFormats, function (j, format) {\n          const source = document.createElement('source');\n\n          if (format === 'webp') {\n            if (i !== 'mob') {\n              makeElemOrAttr(source, [\n                  'image/webp',\n                  '(min-width: ' + device + ')',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['type', 'media', 'srcset']);\n            } else {\n              makeElemOrAttr(source, [\n                  'image/webp',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['type', 'srcset']);\n            }\n          } else {\n            if (i !== 'mob') {\n              makeElemOrAttr(source, [\n                  '(min-width: ' + device + ')',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['media', 'srcset']);\n            }\n          }\n\n          if (source.attributes.length > 0) {\n            sources.unshift(source);\n          }\n        });\n      });\n\n      return sources;\n    }\n\n    return null;\n  };\n\n  const setImgAttr = (imgElem, imgData, title) => {\n    imgElem.attr('src', 'img/' + imgData + '-mob@1x.jpg');\n    imgElem.attr('srcset', 'img/' + imgData + '-mob@2x.jpg 2x');\n    imgElem.attr('alt', title);\n    imgElem.attr('width', '250');\n    imgElem.attr('height', '200');\n  };\n\n  const makeItemImage = (imgElem, imageData, deviceVersions, imgFormats) => {\n    const picture = document.createElement('picture');\n\n\n    $.each(makeSources(deviceVersions, imageData, imgFormats), function () {\n      picture.appendChild(this);\n    });\n\n    picture.appendChild($(imgElem)[0]);\n\n    return picture;\n  };\n\n  const makeItems = function (itemsData, makeItem, section, listClass, makeSlider) {\n    const ANIMATION_TIME = 300;\n\n    const itemsArgs = arguments;\n    const setTheBest = itemsArgs[itemsArgs.length - 2];\n    const setItemsListeners = itemsArgs[itemsArgs.length - 1];\n    const fragment = window.util.fragment;\n    const list = section.find('.' + listClass);\n\n    if (section.hasClass('directions') && screen.width >= window.util.screenWidth.TAB_MIN) {\n      const $itemsWrapper = $('<div>').addClass('directions__items-wrapper');\n      const $btnLookMore = $('<a>', {href: '#'}).addClass('directions__watch-more').text('Смотреть больше');\n      const firstItem = makeItem(itemsData[0]);\n\n      for (let i = 1; i < itemsData.length; i += 1) {\n        const item = makeItem(itemsData[i]);\n        $(item).addClass('direction--small');\n        $($itemsWrapper)[0].appendChild(item);\n      }\n\n      $itemsWrapper.append($btnLookMore);\n      $(firstItem).addClass('direction--big');\n      fragment.appendChild(firstItem);\n      fragment.appendChild($($itemsWrapper)[0]);\n    } else {\n      $.each(itemsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    }\n\n    switch (true) {\n      case section.hasClass('subscriptions') && window.subscriptions.onTimeBtnClickCounter > 1 :\n        if (screen.width >= window.util.screenWidth.TAB_MIN) {\n          const listHeight = list.height();\n          list.css('min-height', listHeight).animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n\n              setTheBest();\n              setItemsListeners();\n\n              $(this).animate({\n                opacity: 1\n              }, ANIMATION_TIME);\n            });\n        } else {\n          list.animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n              $(this).animate({\n                opacity: 1,\n              }, ANIMATION_TIME);\n            });\n        }\n        break;\n\n      case listClass === 'members-slider' || listClass === 'reviews-slider' :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n        makeSlider();\n        break;\n\n      default :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n    }\n  };\n\n  const removeSection = (section) => {\n    return () => {\n      section.remove();\n    }\n  };\n\n  window.items = {\n    makeText: makeText,\n    makeHref: makeHref,\n    makeItemImage: makeItemImage,\n    setImgAttr: setImgAttr,\n    removeSection: removeSection,\n    makeItems: makeItems\n  };\n})();\n"],"file":"items.js"}