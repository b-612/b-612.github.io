{"version":3,"sources":["items.js"],"names":["makeElemAttr","itemElem","dataElemArr","itemElemOrAttrArr","i","length","setAttribute","remove","makeText","element","data","text","makeHref","attr","makeSources","deviceVersions","imageData","imgFormats","sources","$","each","device","j","format","source","document","createElement","attributes","unshift","setImgAttr","imgElem","imgData","title","makeItemImage","picture","appendChild","makeItems","itemsData","makeItem","section","listClass","makeSlider","ANIMATION_TIME","itemsArgs","arguments","setTheBest","setItemsListeners","fragment","window","util","list","find","hasClass","items","directionsData","screen","width","screenWidth","TAB_MIN","$itemsWrapper","addClass","$btnLookMore","href","firstItem","item","append","subscriptions","onTimeBtnClickCounter","listHeight","height","css","animate","opacity","empty","removeSection"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const makeElemAttr = (itemElem, dataElemArr, itemElemOrAttrArr) => {\n    for (let i = 0; i < dataElemArr.length; i++) {\n      if (dataElemArr[i]) {\n        itemElem.setAttribute(itemElemOrAttrArr[i], dataElemArr[i]);\n      } else {\n        itemElem.remove();\n        break;\n      }\n    }\n  };\n\n  const makeText = (element, data) => {\n    if (data) {\n      element.text(data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeHref = (element, data) => {\n    if (data) {\n      element.attr('href', data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeSources = (deviceVersions, imageData, imgFormats) => {\n    if (imageData) {\n      const sources = [];\n\n      $.each(deviceVersions, function (i, device) {\n        $.each(imgFormats, function (j, format) {\n          const source = document.createElement('source');\n\n          if (format === 'webp') {\n            if (i !== 'mob') {\n              makeElemAttr(source, [\n                  'image/webp',\n                  `(min-width: ${device})`,\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['type', 'media', 'srcset']);\n            } else {\n              makeElemAttr(source, [\n                  'image/webp',\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['type', 'srcset']);\n            }\n          } else {\n            if (i !== 'mob') {\n              makeElemAttr(source, [\n                  '(min-width: ' + device + ')',\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['media', 'srcset']);\n            }\n          }\n\n          if (source.attributes.length > 0) {\n            sources.unshift(source);\n          }\n        });\n      });\n\n      return sources;\n    }\n\n    return null;\n  };\n\n  const setImgAttr = (imgElem, imgData, title) => {\n    imgElem.attr('src', `img/${imgData}-mob@1x.jpg`);\n    imgElem.attr('srcset', `img/${imgData}-mob@2x.jpg 2x`);\n    imgElem.attr('alt', title);\n    imgElem.attr('width', '250');\n    imgElem.attr('height', '200');\n  };\n\n  const makeItemImage = (imgElem, imageData, deviceVersions, imgFormats) => {\n    const picture = document.createElement('picture');\n\n\n    $.each(makeSources(deviceVersions, imageData, imgFormats), function () {\n      picture.appendChild(this);\n    });\n\n    picture.appendChild($(imgElem)[0]);\n\n    return picture;\n  };\n\n  const makeItems = function (itemsData, makeItem, section, listClass, makeSlider) {\n    const ANIMATION_TIME = 300;\n\n    const itemsArgs = arguments;\n    const setTheBest = itemsArgs[itemsArgs.length - 2];\n    const setItemsListeners = itemsArgs[itemsArgs.length - 1];\n    const fragment = window.util.fragment;\n    const list = section.find('.' + listClass);\n\n    if (section.hasClass('directions') && !window.items.directionsData) {\n      window.items.directionsData = itemsData;\n    }\n\n    if (section.hasClass('directions') && screen.width >= window.util.screenWidth.TAB_MIN) {\n      const $itemsWrapper = $('<div>').addClass('directions__items-wrapper');\n      const $btnLookMore = $('<a>', {href: '#'}).addClass('directions__watch-more').text('Смотреть больше');\n      const firstItem = makeItem(window.items.directionsData[0]);\n\n      for (let i = 1; i < window.items.directionsData.length; i += 1) {\n        const item = makeItem(window.items.directionsData[i]);\n        $(item).addClass('direction--small');\n        $($itemsWrapper)[0].appendChild(item);\n      }\n\n      $itemsWrapper.append($btnLookMore);\n      $(firstItem).addClass('direction--big');\n      fragment.appendChild(firstItem);\n      fragment.appendChild($($itemsWrapper)[0]);\n    } else if (section.hasClass('directions')) {\n      $.each(window.items.directionsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    } else {\n      $.each(itemsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    }\n\n    switch (true) {\n      case section.hasClass('subscriptions') && window.subscriptions.onTimeBtnClickCounter > 1 :\n        if (screen.width >= window.util.screenWidth.TAB_MIN) {\n          const listHeight = list.height();\n          list.css('min-height', listHeight).animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n\n              setTheBest();\n              setItemsListeners();\n\n              $(this).animate({\n                opacity: 1\n              }, ANIMATION_TIME);\n            });\n        } else {\n          list.animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n              $(this).animate({\n                opacity: 1,\n              }, ANIMATION_TIME);\n            });\n        }\n        break;\n\n      case listClass === 'members-slider' || listClass === 'reviews-slider' :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n        makeSlider();\n        break;\n\n      default :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n    }\n  };\n\n  const removeSection = (section) => {\n    return () => {\n      section.remove();\n    }\n  };\n\n  window.items = {\n    makeText: makeText,\n    makeHref: makeHref,\n    makeItemImage: makeItemImage,\n    setImgAttr: setImgAttr,\n    removeSection: removeSection,\n    makeItems: makeItems,\n  };\n})();\n"],"file":"items.js"}