{"version":3,"sources":["items.js"],"names":["makeElemOrAttr","itemElem","dataElemArr","itemElemOrAttrArr","i","length","remove","window","items","makeText","element","data","text","makeHref","attr","makeItemImage","imgElem","imageData","deviceVersions","imgFormats","picture","document","createElement","$","each","sources","device","j","format","source","attributes","unshift","makeSources","appendChild","this","setImgAttr","imgData","title","removeSection","section","makeItems","itemsData","makeItem","listClass","makeSlider","itemsArgs","arguments","setTheBest","setItemsListeners","fragment","util","list","find","hasClass","screen","width","screenWidth","TAB_MIN","$itemsWrapper","addClass","$btnLookMore","href","firstItem","item","append","subscriptions","onTimeBtnClickCounter","listHeight","height","css","animate","opacity","empty"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const makeElemOrAttr = (itemElem, dataElemArr, itemElemOrAttrArr) => {\n    for (let i = 0; i < dataElemArr.length; i++) {\n      if (dataElemArr[i]) {\n        itemElem[itemElemOrAttrArr[i]] = dataElemArr[i];\n      } else {\n        itemElem.remove();\n        break;\n      }\n    }\n  };\n\n  const makeText = (element, data) => {\n    if (data) {\n      element.text(data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeHref = (element, data) => {\n    if (data) {\n      element.attr('href', data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeSources = (deviceVersions, imageData, imgFormats) => {\n    if (imageData) {\n      const sources = [];\n\n      $.each(deviceVersions, function (i, device) {\n        $.each(imgFormats, function (j, format) {\n          const source = document.createElement('source');\n\n          if (format === 'webp') {\n            if (i !== 'mob') {\n              makeElemOrAttr(source, [\n                  'image/webp',\n                  '(min-width: ' + device + ')',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['type', 'media', 'srcset']);\n            } else {\n              makeElemOrAttr(source, [\n                  'image/webp',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['type', 'srcset']);\n            }\n          } else {\n            if (i !== 'mob') {\n              makeElemOrAttr(source, [\n                  '(min-width: ' + device + ')',\n                  'img/' + imageData + '-' + i + '@1x.' + format + ' 1x, ' +\n                  'img/' + imageData + '-' + i + '@2x.' + format + ' 2x'\n                ],\n                ['media', 'srcset']);\n            }\n          }\n\n          if (source.attributes.length > 0) {\n            sources.unshift(source);\n          }\n        });\n      });\n\n      return sources;\n    }\n\n    return null;\n  };\n\n  const setImgAttr = (imgElem, imgData, title) => {\n    imgElem.attr('src', 'img/' + imgData + '-mob@1x.jpg');\n    imgElem.attr('srcset', 'img/' + imgData + '-mob@2x.jpg 2x');\n    imgElem.attr('alt', title);\n    imgElem.attr('width', '250');\n    imgElem.attr('height', '200');\n  };\n\n  const makeItemImage = (imgElem, imageData, deviceVersions, imgFormats) => {\n    const picture = document.createElement('picture');\n\n\n    $.each(makeSources(deviceVersions, imageData, imgFormats), function () {\n      picture.appendChild(this);\n    });\n\n    picture.appendChild($(imgElem)[0]);\n\n    return picture;\n  };\n\n  const makeItems = function (itemsData, makeItem, section, listClass, makeSlider) {\n    const ANIMATION_TIME = 300;\n\n    const itemsArgs = arguments;\n    const setTheBest = itemsArgs[itemsArgs.length - 2];\n    const setItemsListeners = itemsArgs[itemsArgs.length - 1];\n    const fragment = window.util.fragment;\n    const list = section.find('.' + listClass);\n\n    if (section.hasClass('directions') && screen.width >= window.util.screenWidth.TAB_MIN) {\n      const $itemsWrapper = $('<div>').addClass('directions__items-wrapper');\n      const $btnLookMore = $('<a>', {href: '#'}).addClass('directions__watch-more').text('Смотреть больше');\n      const firstItem = makeItem(itemsData[0]);\n\n      for (let i = 1; i < itemsData.length; i += 1) {\n        const item = makeItem(itemsData[i]);\n        $(item).addClass('direction--small');\n        $($itemsWrapper)[0].appendChild(item);\n      }\n\n      $itemsWrapper.append($btnLookMore);\n      $(firstItem).addClass('direction--big');\n      fragment.appendChild(firstItem);\n      fragment.appendChild($($itemsWrapper)[0]);\n    } else {\n      $.each(itemsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    }\n\n    switch (true) {\n      case section.hasClass('subscriptions') && window.subscriptions.onTimeBtnClickCounter > 1 :\n        if (screen.width >= window.util.screenWidth.TAB_MIN) {\n          const listHeight = list.height();\n          list.css('min-height', listHeight).animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n\n              setTheBest();\n              setItemsListeners();\n\n              $(this).animate({\n                opacity: 1\n              }, ANIMATION_TIME);\n            });\n        } else {\n          list.animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n              $(this).animate({\n                opacity: 1,\n              }, ANIMATION_TIME);\n            });\n        }\n        break;\n\n      case listClass === 'members-slider' || listClass === 'reviews-slider' :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n        makeSlider();\n        break;\n\n      default :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n    }\n  };\n\n  const removeSection = (section) => {\n    return () => {\n      section.remove();\n    }\n  };\n\n  window.items = {\n    makeText: makeText,\n    makeHref: makeHref,\n    makeItemImage: makeItemImage,\n    setImgAttr: setImgAttr,\n    removeSection: removeSection,\n    makeItems: makeItems\n  };\n})();\n"],"file":"items.min.js"}