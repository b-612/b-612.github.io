{"version":3,"sources":["items.js"],"names":["makeElemAttr","itemElem","dataElemArr","itemElemOrAttrArr","i","length","remove","setAttribute","window","items","makeText","element","data","text","makeHref","attr","makeItemImage","imgElem","imageData","deviceVersions","imgFormats","picture","document","createElement","$","each","sources","device","j","format","source","concat","attributes","unshift","makeSources","appendChild","this","setImgAttr","imgData","title","removeSection","section","makeItems","itemsData","makeItem","listClass","makeSlider","itemsArgs","arguments","setTheBest","setItemsListeners","fragment","util","list","find","hasClass","directionsData","screen","width","screenWidth","TAB_MIN","$itemsWrapper","addClass","$btnLookMore","href","firstItem","item","append","subscriptions","onTimeBtnClickCounter","listHeight","height","css","animate","opacity","empty"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const makeElemAttr = (itemElem, dataElemArr, itemElemOrAttrArr) => {\n    for (let i = 0; i < dataElemArr.length; i++) {\n      if (dataElemArr[i]) {\n        itemElem.setAttribute(itemElemOrAttrArr[i], dataElemArr[i]);\n      } else {\n        itemElem.remove();\n        break;\n      }\n    }\n  };\n\n  const makeText = (element, data) => {\n    if (data) {\n      element.text(data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeHref = (element, data) => {\n    if (data) {\n      element.attr('href', data);\n    } else {\n      element.remove();\n    }\n  };\n\n  const makeSources = (deviceVersions, imageData, imgFormats) => {\n    if (imageData) {\n      const sources = [];\n\n      $.each(deviceVersions, function (i, device) {\n        $.each(imgFormats, function (j, format) {\n          const source = document.createElement('source');\n\n          if (format === 'webp') {\n            if (i !== 'mob') {\n              makeElemAttr(source, [\n                  'image/webp',\n                  `(min-width: ${device})`,\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['type', 'media', 'srcset']);\n            } else {\n              makeElemAttr(source, [\n                  'image/webp',\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['type', 'srcset']);\n            }\n          } else {\n            if (i !== 'mob') {\n              makeElemAttr(source, [\n                  '(min-width: ' + device + ')',\n                  `img/${imageData}-${i}@1x.${format} 1x, img/${imageData}-${i}@2x.${format} 2x`\n                ],\n                ['media', 'srcset']);\n            }\n          }\n\n          if (source.attributes.length > 0) {\n            sources.unshift(source);\n          }\n        });\n      });\n\n      return sources;\n    }\n\n    return null;\n  };\n\n  const setImgAttr = (imgElem, imgData, title) => {\n    imgElem.attr('src', `img/${imgData}-mob@1x.jpg`);\n    imgElem.attr('srcset', `img/${imgData}-mob@2x.jpg 2x`);\n    imgElem.attr('alt', title);\n    imgElem.attr('width', '250');\n    imgElem.attr('height', '200');\n  };\n\n  const makeItemImage = (imgElem, imageData, deviceVersions, imgFormats) => {\n    const picture = document.createElement('picture');\n\n\n    $.each(makeSources(deviceVersions, imageData, imgFormats), function () {\n      picture.appendChild(this);\n    });\n\n    picture.appendChild($(imgElem)[0]);\n\n    return picture;\n  };\n\n  const makeItems = function (itemsData, makeItem, section, listClass, makeSlider) {\n    const ANIMATION_TIME = 300;\n\n    const itemsArgs = arguments;\n    const setTheBest = itemsArgs[itemsArgs.length - 2];\n    const setItemsListeners = itemsArgs[itemsArgs.length - 1];\n    const fragment = window.util.fragment;\n    const list = section.find('.' + listClass);\n\n    if (section.hasClass('directions') && !window.items.directionsData) {\n      window.items.directionsData = itemsData;\n    }\n\n    if (section.hasClass('directions') && screen.width >= window.util.screenWidth.TAB_MIN) {\n      const $itemsWrapper = $('<div>').addClass('directions__items-wrapper');\n      const $btnLookMore = $('<a>', {href: '#'}).addClass('directions__watch-more').text('Смотреть больше');\n      const firstItem = makeItem(window.items.directionsData[0]);\n\n      for (let i = 1; i < window.items.directionsData.length; i += 1) {\n        const item = makeItem(window.items.directionsData[i]);\n        $(item).addClass('direction--small');\n        $($itemsWrapper)[0].appendChild(item);\n      }\n\n      $itemsWrapper.append($btnLookMore);\n      $(firstItem).addClass('direction--big');\n      fragment.appendChild(firstItem);\n      fragment.appendChild($($itemsWrapper)[0]);\n    } else if (section.hasClass('directions')) {\n      $.each(window.items.directionsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    } else {\n      $.each(itemsData, function () {\n        fragment.appendChild(makeItem(this));\n      });\n    }\n\n    switch (true) {\n      case section.hasClass('subscriptions') && window.subscriptions.onTimeBtnClickCounter > 1 :\n        if (screen.width >= window.util.screenWidth.TAB_MIN) {\n          const listHeight = list.height();\n          list.css('min-height', listHeight).animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n\n              setTheBest();\n              setItemsListeners();\n\n              $(this).animate({\n                opacity: 1\n              }, ANIMATION_TIME);\n            });\n        } else {\n          list.animate({\n              opacity: 0\n            },\n            ANIMATION_TIME, function () {\n              $(this).empty();\n              this.appendChild(fragment);\n              $(this).animate({\n                opacity: 1,\n              }, ANIMATION_TIME);\n            });\n        }\n        break;\n\n      case listClass === 'members-slider' || listClass === 'reviews-slider' :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n        makeSlider();\n        break;\n\n      default :\n        section.find('.' + listClass).empty()[0].appendChild(fragment);\n    }\n  };\n\n  const removeSection = (section) => {\n    return () => {\n      section.remove();\n    }\n  };\n\n  window.items = {\n    makeText: makeText,\n    makeHref: makeHref,\n    makeItemImage: makeItemImage,\n    setImgAttr: setImgAttr,\n    removeSection: removeSection,\n    makeItems: makeItems,\n  };\n})();\n"],"file":"items.min.js"}