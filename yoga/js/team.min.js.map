{"version":3,"sources":["team.js"],"names":["section","$","$slider","$teamCardTemp","parseHTML","html","makeDescription","descriptionData","element","description","forEach","current","nextElem","clone","text","push","Array","from","makeSocial","socialElem","socialData","socialName","sectionName","authorName","socialItem","parent","svg","find","title","remove","attr","concat","split","counter","appendChild","setTimeout","elemClone","empty","append","resetSocialCounter","replaceClonedSocials","slider","socialIconClass","$oldAttr","each","i","this","InquiryParam","URL","ON_SUCCESS","makeItems","window","items","ON_ERROR","removeSection","MAKE_ITEM","teamMemberData","imageElement","imageData","$memberCard","$memberParam","MEMBER_NAME","MEMBER_PRACTICE","MEMBER_IMAGE","LINK_VK","LINK_TWITTER","DESC_TITLE","EXPERIENCE_TIME","DESCRIPTION","makeText","name","practice","image","vk","twitter","experienceTime","SECTION","LIST_CLASS","MAKE_SLIDER","slick","dots","prevArrow","nextArrow","infinite","accessibility","zIndex","speed","slidesToShow","slidesToScroll","responsive","breakpoint","util","screenWidth","MOB_MAX","settings","MOB_MID","draggable","backend","getItems","team"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const TEAM_MEMBERS_URL = 'https://b-612.github.io/json/yoga/team.json';\n\n  const section = $('.team');\n  const $slider = $('.members-slider');\n  const $teamCardTemp = $.parseHTML($('#team-member').html());\n\n  const makeDescription = (descriptionData, element) => {\n    const description = [];\n\n    descriptionData.forEach((current) => {\n      const nextElem = $(element).clone();\n      nextElem.text(current);\n      description.push(nextElem);\n    });\n\n    return Array.from(description);\n  };\n\n  const makeAvatar = (imageElement, imageData) => {\n    imageElement.attr('src', `img/${imageData}-mob@1x.jpg`);\n    imageElement.attr('srcset', `img/${imageData}-mob@2x.jpg 2x`);\n\n    $(imageElement.parent())\n      .find('source[media=\"(min-width: 768px)\"][type != \"image/webp\"]')\n      .attr(\n        'srcset',\n        `img/${imageData}-tablet@1x.jpg 1x, img/${imageData}-tablet@2x.jpg 2x`\n      );\n\n    $(imageElement.parent())\n      .find('source[media=\"(min-width: 1300px)\"][type != \"image/webp\"]')\n      .attr(\n        'srcset',\n        `img/${imageData}-desktop@1x.jpg 1x, img/${imageData}-desktop@2x.jpg 2x`\n      );\n\n    $(imageElement.parent())\n      .find('source[type=\"image/webp\"][media != \"(min-width: 768px)\"][media != \"(min-width: 1300px)\"]')\n      .attr(\n        'srcset',\n        `img/${imageData}-mob@1x.webp 1x, img/${imageData}-mob@2x.webp 2x`\n      );\n\n    $(imageElement.parent())\n      .find('source[media=\"(min-width: 768px)\"][type = \"image/webp\"]')\n      .attr(\n        'srcset',\n        `img/${imageData}-tablet@1x.webp 1x, img/${imageData}-tablet@2x.webp 2x`\n      );\n\n    $(imageElement.parent())\n      .find('source[media=\"(min-width: 1300px)\"][type = \"image/webp\"]')\n      .attr(\n        'srcset',\n        `img/${imageData}-desktop@1x.webp 1x, img/${imageData}-desktop@2x.webp 2x`\n      );\n  };\n\n  const makeSocial = (socialElem, socialData, socialName, sectionName, authorName) => {\n    const socialItem = socialElem.parent();\n    const svg = socialElem.find('svg');\n    const title = svg.find('title');\n\n    socialElem.remove();\n    socialElem.attr('href', socialData);\n\n    svg.attr(\n      'aria-labelledby',\n      `${sectionName}heading-${socialElem.find('use').attr('xlink:href').split('#')[1]}-user-${makeSocial.counter}`\n    );\n\n    title.text(`${authorName} ${socialName}`);\n\n    socialElem.find('title')\n      .attr(\n        'id',\n        `${sectionName}heading-${socialElem.find('use').attr('xlink:href').split('#')[1]}-user-${makeSocial.counter}`\n      );\n\n    $(socialItem)[0].appendChild($(socialElem)[0]);\n\n    setTimeout(() => {\n      const elemClone = socialElem.clone();\n      socialItem.empty();\n      socialItem .append(elemClone);\n    }, 0);\n\n  };\n\n  const resetSocialCounter = () => {\n    makeSocial.counter = 1;\n  };\n\n  resetSocialCounter();\n\n  const makeTeamMember = (teamMemberData) => {\n    const $memberCard = $($teamCardTemp).clone();\n    const $memberParam = {\n      MEMBER_NAME: $($memberCard).find('.team-member__name'),\n      MEMBER_PRACTICE: $($memberCard).find('.team-member__practice'),\n      MEMBER_IMAGE: $($memberCard).find('.team-member__avatar'),\n      LINK_VK: $($memberCard).find('.team-member__social-link--vk'),\n      LINK_TWITTER: $($memberCard).find('.team-member__social-link--twitter'),\n      DESC_TITLE: $($memberCard).find('.team-member__description-title'),\n      EXPERIENCE_TIME: $($memberCard).find('.team-member__experience-time'),\n      DESCRIPTION: $($memberCard).find('.team-member__description')\n    };\n\n    window.items.makeText($memberParam.MEMBER_NAME, teamMemberData.name);\n    window.items.makeText($memberParam.MEMBER_PRACTICE, teamMemberData.practice);\n    makeAvatar($memberParam.MEMBER_IMAGE, teamMemberData.image);\n    makeSocial($memberParam.LINK_VK, teamMemberData.vk, 'Вконтакте', 'team', teamMemberData.name);\n    makeSocial($memberParam.LINK_TWITTER, teamMemberData.twitter, 'в Твиттер', 'team', teamMemberData.name);\n    makeSocial.counter++;\n    window.items.makeText($memberParam.DESC_TITLE, teamMemberData.name);\n    window.items.makeText($memberParam.EXPERIENCE_TIME, teamMemberData.experienceTime);\n    $($memberCard).find('.team-member__description').remove();\n\n    makeDescription(teamMemberData.description, $memberParam.DESCRIPTION[0])\n      .forEach((current) => {\n        $memberCard.find('.team-member__description-wrapper').append(current);\n    });\n\n    return $($memberCard)[0];\n  };\n\n  const replaceClonedSocials = (sectionName, slider, socialIconClass) => {\n    const $oldAttr = sectionName + 'heading';\n\n    slider.find('.slick-cloned')\n      .find('.' + socialIconClass)\n      .each(function (i) {\n        $(this).attr('aria-labelledby', $oldAttr +  '-' + i);\n        $(this).find('title').attr('id', $oldAttr +  '-' + i);\n      })\n  };\n\n  const makeTeamSlider = () => {\n    $('.members-slider').slick({\n      dots: false,\n      prevArrow: '<button class=\"members-slider__btn members-slider__btn--prev slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Предыдущий участник</span></button>',\n      nextArrow: '<button class=\"members-slider__btn members-slider__btn--next slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Следующий участник</span></button>',\n      infinite: true,\n      accessibility: true,\n      zIndex: 1000,\n      speed: 300,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      responsive: [\n        {\n          breakpoint: window.util.screenWidth.MOB_MAX,\n          settings: {\n            slidesToShow: 2,\n            slidesToScroll: 2,\n            infinite: true,\n            dots: false\n          }\n        },\n        {\n          breakpoint: window.util.screenWidth.MOB_MID,\n          settings: {\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            infinite: true,\n            dots: false,\n            draggable: true\n          }\n        }\n      ]\n    });\n\n    setTimeout(() => {\n      replaceClonedSocials('team', $slider, 'team-member__social-icon');\n    }, 0);\n  };\n\n  const InquiryParam = {\n    URL: TEAM_MEMBERS_URL,\n    ON_SUCCESS: {\n      makeItems: window.items.makeItems\n    },\n    ON_ERROR: window.items.removeSection,\n    MAKE_ITEM: makeTeamMember,\n    SECTION: section,\n    LIST_CLASS: 'members-slider',\n    MAKE_SLIDER: makeTeamSlider\n  };\n\n  window.backend.getItems(InquiryParam);\n\n  window.team = {\n    makeDescription: makeDescription,\n    makeSocial: makeSocial,\n    resetSocialCounter: resetSocialCounter,\n    replaceClonedSocials: replaceClonedSocials\n  }\n})();\n"],"file":"team.min.js"}