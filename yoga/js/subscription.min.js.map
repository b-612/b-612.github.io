{"version":3,"sources":["subscription.js"],"names":["$section","$","$subscriptionCardTemp","parseHTML","html","$subscriptionBtn","onItemHover","window","util","debounce","evt","currentTarget","hasClass","not","removeClass","find","hide","addClass","slideDown","this","show","InquiryParam","URL","ON_SUCCESS","makeItems","items","setTheBest","screen","width","screenWidth","TAB_MIN","setItemsListeners","on","focus","setListHeight","startHeight","height","css","ON_ERROR","removeSection","MAKE_ITEM","subscriptionData","$subscriptionCard","clone","$subscriptionParam","TITLE","TEXT","TIME","PRICE","ORDER_LINK","makeText","title","textElem","timeElem","isTimeLimit","text","startTime","endTime","remove","makeTime","price","makeHref","orderLink","SECTION","LIST_CLASS","MAKE_SLIDER","click","preventDefault","target","backend","getItems","subscriptions","onTimeBtnClickCounter","onTimeBtnClick","resizeSubscr"],"mappings":"AAAA,cAEA,WACE,IAIIA,EAAWC,EAAE,kBACbC,EAAwBD,EAAEE,UAAUF,EAAE,iBAAiBG,QACvDC,EAAmBJ,EAAE,4BA2BrBK,EAAcC,OAAOC,KAAKC,SAAS,SAAUC,GAG3CT,EAAES,EAAIC,eAAeC,SAAS,kBAChCX,EAAE,iBAAiBY,IAAIZ,EAAES,EAAIC,gBAAgBG,YAAY,sBAAsBC,KAAK,uBAAuBC,OAC3Gf,EAAES,EAAIC,eAAeM,SAAS,sBAAsBF,KAAK,uBAAuBG,UAJ7D,IAIuF,WACxGjB,EAAEkB,MAAMC,WAvCU,KA0DpBC,EAAe,CACjBC,IA1DgC,8DA2DhCC,WAAY,CACVC,UAAWjB,OAAOkB,MAAMD,UACxBE,WAZe,WACjBzB,EAAE,uBAAuBgB,SAAS,sBAE9BU,OAAOC,OAASrB,OAAOC,KAAKqB,YAAYC,SAC1C7B,EAAE,iBAAiBY,IAAI,uBAAuBE,KAAK,uBAAuBC,QAS1Ee,kBAnBoB,WAClBJ,OAAOC,OAASrB,OAAOC,KAAKqB,YAAYC,SAC1C7B,EAAE,iBAAiB+B,GAAG,aAAc1B,GAAa2B,MAAM3B,IAkBvD4B,cAAe,WACb,IAAIC,EAAclC,EAAE,wBAAwBmC,SAC5CnC,EAAE,wBAAwBoC,IAAI,aAAcF,KAGhDG,SAAU/B,OAAOkB,MAAMc,cACvBC,UArDqB,SAA0BC,GAC/C,IAAIC,EAAoBzC,EAAEC,GAAuByC,QAC7CC,EAAqB,CACvBC,MAAO5C,EAAEyC,GAAmB3B,KAAK,wBACjC+B,KAAM7C,EAAEyC,GAAmB3B,KAAK,8BAChCgC,KAAM9C,EAAEyC,GAAmB3B,KAAK,uBAChCiC,MAAO/C,EAAEyC,GAAmB3B,KAAK,+BACjCkC,WAAYhD,EAAEyC,GAAmB3B,KAAK,wBAMxC,OAJAR,OAAOkB,MAAMyB,SAASN,EAAmBC,MAAOJ,EAAiBU,OAlBpD,SAAkBV,EAAkBW,EAAUC,GACvDZ,EAAiBa,YACnBD,EAASE,KAAK,KAAOd,EAAiBe,UAAY,OAASf,EAAiBgB,UAE5EL,EAASG,KAAK,sCACdF,EAASK,UAcXC,CAASlB,EAAkBG,EAAmBE,KAAMF,EAAmBG,MACvExC,OAAOkB,MAAMyB,SAASN,EAAmBI,MAAOP,EAAiBmB,OACjErD,OAAOkB,MAAMoC,SAASjB,EAAmBK,WAAYR,EAAiBqB,WAC/D7D,EAAEyC,GAAmB,IAyC5BqB,QAAS/D,EACTgE,WAAY,sBACZC,YAAa,MAyBb5D,EAAiB6D,MAAM,SAAUxD,GAC/BA,EAAIyD,iBACJ9D,EAAiBS,YAAY,oCAC7Bb,EAAES,EAAI0D,QAAQnD,SAAS,oCAzBN,SAAwBP,GAC3C,QAAQ,GACN,KAAKT,EAAES,EAAI0D,QAAQxD,SAAS,sCAC1BS,EAAaC,IA9Ee,8DA+E5Bf,OAAO8D,QAAQC,SAASjD,GACxB,MAEF,KAAKpB,EAAES,EAAI0D,QAAQxD,SAAS,uCAC1BS,EAAaC,IAlFe,+DAmF5Bf,OAAO8D,QAAQC,SAASjD,GACxB,MAEF,KAAKpB,EAAES,EAAI0D,QAAQxD,SAAS,iCAC1BS,EAAaC,IAtFU,0DAuFvBf,OAAO8D,QAAQC,SAASjD,GAI5Bd,OAAOgE,cAAcC,wBAQnBC,CAAe/D,KAUnBH,OAAOgE,cAAgB,CACrBC,sBAAuB,EACvBE,aARiB,WACjBzE,EAAE,wBAAwBoC,IAAI,aAAc,IAC5ChC,EAAiB,GAAG6D,UAQtB7D,EAAiB,GAAG6D,QArHtB","sourcesContent":["'use strict';\n\n(function () {\n  const DEBOUNCE_INTERVAL = 200;\n  const SUBSCRIPTIONS_URL_ONE_MONTH = 'https://b-612.github.io/json/yoga/subscriptionOneMonth.json';\n  const SUBSCRIPTIONS_URL_SIX_MONTH = 'https://b-612.github.io/json/yoga/subscriptionSixMonths.json';\n  const SUBSCRIPTIONS_URL_YEAR = 'https://b-612.github.io/json/yoga/subscriptionYear.json';\n\n  const $section = $('.subscriptions');\n  const $subscriptionCardTemp = $.parseHTML($('#subscription').html());\n  const $subscriptionBtn = $('.subscriptions__time-btn');\n\n  const makeTime = (subscriptionData, textElem, timeElem) => {\n    if (subscriptionData.isTimeLimit) {\n      timeElem.text('с ' + subscriptionData.startTime + ' до ' + subscriptionData.endTime);\n    } else {\n      textElem.text('Посещение не ограничено по времени');\n      timeElem.remove();\n    }\n  };\n\n  const makeSubscription = (subscriptionData) => {\n    const $subscriptionCard = $($subscriptionCardTemp).clone();\n    const $subscriptionParam = {\n      TITLE: $($subscriptionCard).find('.subscription__title'),\n      TEXT: $($subscriptionCard).find('.subscription__description'),\n      TIME: $($subscriptionCard).find('.subscription__time'),\n      PRICE: $($subscriptionCard).find('.subscription__price-number'),\n      ORDER_LINK: $($subscriptionCard).find('.subscription__link')\n    };\n\n    window.items.makeText($subscriptionParam.TITLE, subscriptionData.title);\n    makeTime(subscriptionData, $subscriptionParam.TEXT, $subscriptionParam.TIME);\n    window.items.makeText($subscriptionParam.PRICE, subscriptionData.price);\n    window.items.makeHref($subscriptionParam.ORDER_LINK, subscriptionData.orderLink);\n\n    return $($subscriptionCard)[0];\n  };\n\n  const onItemHover = window.util.debounce(function (evt) {\n    const ANIMATION_TIME = 300;\n\n    if ($(evt.currentTarget).hasClass('subscription')) {\n      $('.subscription').not($(evt.currentTarget))\n        .removeClass('subscription--best')\n        .find('.subscription__link').hide();\n      $(evt.currentTarget).addClass('subscription--best')\n        .find('.subscription__link')\n        .slideDown(ANIMATION_TIME, function () {\n          $(this).show();\n        });\n    }\n  }, DEBOUNCE_INTERVAL);\n\n  const setItemsListeners = () => {\n    if (screen.width >= window.util.screenWidth.TAB_MIN) {\n      $('.subscription').on('mouseenter', onItemHover).focus(onItemHover);\n    }\n  };\n\n  const setStartBest = () => {\n    $('.subscription:eq(1)').addClass('subscription--best');\n\n    if (screen.width >= window.util.screenWidth.TAB_MIN) {\n      $('.subscription')\n        .not('.subscription:eq(1)')\n        .find('.subscription__link')\n        .hide();\n    }\n  };\n\n  const InquiryParam = {\n    URL: SUBSCRIPTIONS_URL_ONE_MONTH,\n    ON_SUCCESS: {\n      makeItems: window.items.makeItems,\n      setTheBest: setStartBest,\n      setItemsListeners: setItemsListeners,\n      setListHeight: () => {\n        const startHeight = $('.subscriptions__list').height();\n        $('.subscriptions__list').css('min-height', startHeight);\n      }\n    },\n    ON_ERROR: window.items.removeSection,\n    MAKE_ITEM: makeSubscription,\n    SECTION: $section,\n    LIST_CLASS: 'subscriptions__list',\n    MAKE_SLIDER: null,\n  };\n\n  const onTimeBtnClick = (evt) => {\n    switch (true) {\n      case $(evt.target).hasClass('subscriptions__time-btn--one-month') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_ONE_MONTH;\n        window.backend.getItems(InquiryParam);\n      break;\n\n      case $(evt.target).hasClass('subscriptions__time-btn--six-months') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_SIX_MONTH;\n        window.backend.getItems(InquiryParam);\n      break;\n\n      case $(evt.target).hasClass('subscriptions__time-btn--year') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_YEAR;\n        window.backend.getItems(InquiryParam);\n      break;\n    }\n\n    window.subscriptions.onTimeBtnClickCounter++;\n  };\n\n  const setBtnsListeners = () => {\n    $subscriptionBtn.click((evt) => {\n      evt.preventDefault();\n      $subscriptionBtn.removeClass('subscriptions__time-btn--current');\n      $(evt.target).addClass('subscriptions__time-btn--current');\n      onTimeBtnClick(evt);\n    });\n  };\n\n  const resizeSubscr = () => {\n    $('.subscriptions__list').css('min-height', '');\n    $subscriptionBtn[0].click();\n  };\n\n  setBtnsListeners();\n\n  window.subscriptions = {\n    onTimeBtnClickCounter: 0,\n    resizeSubscr: resizeSubscr\n  };\n\n  $subscriptionBtn[0].click();\n})();\n"],"file":"subscription.min.js"}