{"version":3,"sources":["reviews.js"],"names":["REVIEWS_URL","monthMap","section","$","$slider","$reviewCardTemp","parseHTML","html","makeTime","timeElement","timeData","day","substr","month","year","Number","attr","text","makeAuthorImage","imageElement","imageData","parent","find","window","team","resetSocialCounter","makeReview","reviewData","$reviewCard","clone","$ReviewParam","AUTHOR_NAME","TIME","AUTHOR_IMAGE","LINK_VK","LINK_TWITTER","TEXT","DESCRIPTION","items","makeText","authorName","time","image","remove","makeDescription","review","forEach","current","append","makeSocial","vk","twitter","counter","makePaginationCurrent","currentSlide","$currentPage","screen","width","util","screenWidth","MOB_MID","Math","ceil","makePaginationAll","$allPages","$slides","length","makeReviewsSlider","slick","dots","prevArrow","nextArrow","infinite","accessibility","zIndex","speed","slidesToShow","slidesToScroll","responsive","breakpoint","settings","appendArrows","draggable","TAB_MAX","replaceClonedSocials","InquiryParam","URL","ON_SUCCESS","makeItems","ON_ERROR","removeSection","MAKE_ITEM","SECTION","LIST_CLASS","MAKE_SLIDER","backend","getItems","on","evt","resize"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const REVIEWS_URL = 'https://b-612.github.io/json/yoga/reviews.json';\n  const monthMap = {\n    '01': 'января',\n    '02': 'февраля',\n    '03': 'марта',\n    '04': 'апреля',\n    '05': 'мая',\n    '06': 'июня',\n    '07': 'июля',\n    '08': 'августа',\n    '09': 'сентября',\n    '10': 'октября',\n    '11': 'ноября',\n    '12': 'декабря'\n  };\n\n  const section = $('.reviews');\n  const $slider = $('.reviews__slider');\n  const $reviewCardTemp = $.parseHTML($('#review').html());\n\n  const makeTime = (timeElement, timeData) => {\n    let day = timeData.substr(8);\n    const month = monthMap[timeData.substr(5, 2)];\n    const year = timeData.substr(0, 4);\n\n    if (Number(day[0]) === 0) {\n      day = day.substr(1, 1);\n    }\n\n    timeElement.attr('datetime', timeData);\n    timeElement.text(day + ' ' + month + ' ' + year);\n  };\n\n  const makeAuthorImage = (imageElement, imageData) => {\n    imageElement.attr('src', 'img/' + imageData + '@1x.jpg');\n    imageElement.attr('srcset', 'img/' + imageData + '@2x.jpg 2x');\n\n    $(imageElement.parent())\n      .find('source[type=\"image/webp\"]')\n      .attr('srcset', 'img/' + imageData + '@1x.webp 1x, img/' + imageData + '@2x.webp 2x');\n  };\n\n  window.team.resetSocialCounter();\n\n  var makeReview = (reviewData) => {\n    const $reviewCard = $($reviewCardTemp).clone();\n    const $ReviewParam = {\n      AUTHOR_NAME: $($reviewCard).find('.review__author-name'),\n      TIME: $($reviewCard).find('.review__time'),\n      AUTHOR_IMAGE: $($reviewCard).find('.review__avatar'),\n      LINK_VK: $($reviewCard).find('.review__social-link--vk'),\n      LINK_TWITTER: $($reviewCard).find('.review__social-link--twitter'),\n      TEXT: $($reviewCard).find('.review__text'),\n      DESCRIPTION: $($reviewCard).find('.review__paragraph')\n    };\n\n    window.items.makeText($ReviewParam.AUTHOR_NAME, reviewData.authorName);\n    makeTime($ReviewParam.TIME, reviewData.time);\n    makeAuthorImage($ReviewParam.AUTHOR_IMAGE, reviewData.image);\n    $($reviewCard).find('.review__paragraph').remove();\n    window.team.makeDescription(reviewData.review, $($ReviewParam.DESCRIPTION)[0]).forEach((current) => {\n      $ReviewParam.TEXT.append(current);\n    });\n    window.team.makeSocial($ReviewParam.LINK_VK, reviewData.vk, 'Вконтакте', 'reviews', reviewData.authorName);\n    window.team.makeSocial($ReviewParam.LINK_TWITTER, reviewData.twitter, 'в Твиттер', 'reviews', reviewData.authorName);\n    window.team.makeSocial.counter++;\n\n    return $($reviewCard)[0];\n  };\n\n  const makePaginationCurrent = (currentSlide) => {\n    const $currentPage = $('.reviews__nav-page--current');\n\n    if (screen.width >= window.util.screenWidth.MOB_MID && currentSlide >= 2) {\n      $currentPage.text(Math.ceil((currentSlide + 1) / 2));\n    } else {\n      $currentPage.text(currentSlide + 1);\n    }\n  };\n\n  const makePaginationAll = () => {\n    const $allPages = $('.reviews__nav-page--all');\n    const $slides = $('.reviews-slider__item-wrapper:not(.slick-cloned)');\n\n    $allPages.text($slides.length);\n\n    if (screen.width >= window.util.screenWidth.MOB_MID && $slides.length > 1) {\n      $allPages.text(Math.ceil($slides.length / 2));\n    } else {\n      $allPages.text($slides.length);\n    }\n  };\n\n  const makeReviewsSlider = () => {\n    $('.reviews-slider').slick({\n      dots: false,\n      prevArrow: '<button class=\"reviews__btn reviews__btn--prev slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Предыдущий отзыв</span></button>',\n      nextArrow: '<button class=\"reviews__btn reviews__btn--next slider-arrow\" type=\"button\"><span class=\"visually-hidden\">Следующий отзыв</span></button>',\n      infinite: true,\n      accessibility: true,\n      zIndex: 1000,\n      speed: 300,\n      slidesToShow: 2,\n      slidesToScroll: 2,\n\n      responsive: [\n        {\n          breakpoint: window.util.screenWidth.MOB_MID,\n          settings: {\n            appendArrows: '.reviews__nav',\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            infinite: true,\n            dots: false,\n            draggable: true\n          }\n        },\n        {\n          breakpoint: window.util.screenWidth.TAB_MAX + 1,\n          settings: {\n            appendArrows: '.reviews__nav'\n          }\n        }\n      ]\n    });\n\n    window.team.replaceClonedSocials('reviews', $slider, 'review__social-icon');\n    makePaginationAll();\n  };\n\n  const InquiryParam = {\n    URL: REVIEWS_URL,\n    ON_SUCCESS: {\n      makeItems: window.items.makeItems\n    },\n    ON_ERROR: window.items.removeSection,\n    MAKE_ITEM: makeReview,\n    SECTION: section,\n    LIST_CLASS: 'reviews-slider',\n    MAKE_SLIDER: makeReviewsSlider\n  };\n\n  window.backend.getItems(InquiryParam);\n\n  $slider.on('afterChange', (evt, slick, currentSlide) => {\n    makePaginationCurrent(currentSlide);\n  });\n\n  $(window).resize(function () {\n    makePaginationAll();\n  });\n})();\n"],"file":"reviews.js"}