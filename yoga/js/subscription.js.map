{"version":3,"sources":["subscription.js"],"names":["DEBOUNCE_INTERVAL","SUBSCRIPTIONS_URL_ONE_MONTH","SUBSCRIPTIONS_URL_SIX_MONTH","SUBSCRIPTIONS_URL_YEAR","$section","$","$subscriptionCardTemp","parseHTML","html","$subscriptionBtn","makeTime","subscriptionData","textElem","timeElem","isTimeLimit","text","startTime","endTime","remove","makeSubscription","$subscriptionCard","clone","$subscriptionParam","TITLE","find","TEXT","TIME","PRICE","ORDER_LINK","window","items","makeText","title","price","makeHref","orderLink","onItemHover","util","debounce","evt","ANIMATION_TIME","currentTarget","hasClass","not","removeClass","hide","addClass","slideDown","show","setItemsListeners","screen","width","screenWidth","TAB_MIN","on","focus","setStartBest","InquiryParam","URL","ON_SUCCESS","makeItems","setTheBest","setListHeight","startHeight","height","css","ON_ERROR","removeSection","MAKE_ITEM","SECTION","LIST_CLASS","MAKE_SLIDER","onTimeBtnClick","target","backend","getItems","subscriptions","onTimeBtnClickCounter","setBtnsListeners","click","preventDefault","resizeSubscr"],"mappings":"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","sourcesContent":["'use strict';\n\n(function () {\n  const DEBOUNCE_INTERVAL = 200;\n  const SUBSCRIPTIONS_URL_ONE_MONTH = 'https://b-612.github.io/json/yoga/subscriptionOneMonth.json';\n  const SUBSCRIPTIONS_URL_SIX_MONTH = 'https://b-612.github.io/json/yoga/subscriptionSixMonths.json';\n  const SUBSCRIPTIONS_URL_YEAR = 'https://b-612.github.io/json/yoga/subscriptionYear.json';\n\n  const $section = $('.subscriptions');\n  const $subscriptionCardTemp = $.parseHTML($('#subscription').html());\n  const $subscriptionBtn = $('.subscriptions__time-btn');\n\n  const makeTime = (subscriptionData, textElem, timeElem) => {\n    if (subscriptionData.isTimeLimit) {\n      timeElem.text('с ' + subscriptionData.startTime + ' до ' + subscriptionData.endTime);\n    } else {\n      textElem.text('Посещение не ограничено по времени');\n      timeElem.remove();\n    }\n  };\n\n  const makeSubscription = (subscriptionData) => {\n    const $subscriptionCard = $($subscriptionCardTemp).clone();\n    const $subscriptionParam = {\n      TITLE: $($subscriptionCard).find('.subscription__title'),\n      TEXT: $($subscriptionCard).find('.subscription__description'),\n      TIME: $($subscriptionCard).find('.subscription__time'),\n      PRICE: $($subscriptionCard).find('.subscription__price-number'),\n      ORDER_LINK: $($subscriptionCard).find('.subscription__link')\n    };\n\n    window.items.makeText($subscriptionParam.TITLE, subscriptionData.title);\n    makeTime(subscriptionData, $subscriptionParam.TEXT, $subscriptionParam.TIME);\n    window.items.makeText($subscriptionParam.PRICE, subscriptionData.price);\n    window.items.makeHref($subscriptionParam.ORDER_LINK, subscriptionData.orderLink);\n\n    return $($subscriptionCard)[0];\n  };\n\n  const onItemHover = window.util.debounce(function (evt) {\n    const ANIMATION_TIME = 300;\n\n    if ($(evt.currentTarget).hasClass('subscription')) {\n      $('.subscription').not($(evt.currentTarget))\n        .removeClass('subscription--best')\n        .find('.subscription__link').hide();\n      $(evt.currentTarget).addClass('subscription--best')\n        .find('.subscription__link')\n        .slideDown(ANIMATION_TIME, function () {\n          $(this).show();\n        });\n    }\n  }, DEBOUNCE_INTERVAL);\n\n  const setItemsListeners = () => {\n    if (screen.width >= window.util.screenWidth.TAB_MIN) {\n      $('.subscription').on('mouseenter', onItemHover).focus(onItemHover);\n    }\n  };\n\n  const setStartBest = () => {\n    $('.subscription:eq(1)').addClass('subscription--best');\n\n    if (screen.width >= window.util.screenWidth.TAB_MIN) {\n      $('.subscription')\n        .not('.subscription:eq(1)')\n        .find('.subscription__link')\n        .hide();\n    }\n  };\n\n  const InquiryParam = {\n    URL: SUBSCRIPTIONS_URL_ONE_MONTH,\n    ON_SUCCESS: {\n      makeItems: window.items.makeItems,\n      setTheBest: setStartBest,\n      setItemsListeners: setItemsListeners,\n      setListHeight: () => {\n        const startHeight = $('.subscriptions__list').height();\n        $('.subscriptions__list').css('min-height', startHeight);\n      }\n    },\n    ON_ERROR: window.items.removeSection,\n    MAKE_ITEM: makeSubscription,\n    SECTION: $section,\n    LIST_CLASS: 'subscriptions__list',\n    MAKE_SLIDER: null,\n  };\n\n  const onTimeBtnClick = (evt) => {\n    switch (true) {\n      case $(evt.target).hasClass('subscriptions__time-btn--one-month') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_ONE_MONTH;\n        window.backend.getItems(InquiryParam);\n      break;\n\n      case $(evt.target).hasClass('subscriptions__time-btn--six-months') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_SIX_MONTH;\n        window.backend.getItems(InquiryParam);\n      break;\n\n      case $(evt.target).hasClass('subscriptions__time-btn--year') :\n        InquiryParam.URL = SUBSCRIPTIONS_URL_YEAR;\n        window.backend.getItems(InquiryParam);\n      break;\n    }\n\n    window.subscriptions.onTimeBtnClickCounter++;\n  };\n\n  const setBtnsListeners = () => {\n    $subscriptionBtn.click((evt) => {\n      evt.preventDefault();\n      $subscriptionBtn.removeClass('subscriptions__time-btn--current');\n      $(evt.target).addClass('subscriptions__time-btn--current');\n      onTimeBtnClick(evt);\n    });\n  };\n\n  const resizeSubscr = () => {\n    $('.subscriptions__list').css('min-height', '');\n    $subscriptionBtn[0].click();\n  };\n\n  setBtnsListeners();\n\n  window.subscriptions = {\n    onTimeBtnClickCounter: 0,\n    resizeSubscr: resizeSubscr\n  };\n\n  $subscriptionBtn[0].click();\n})();\n"],"file":"subscription.js"}