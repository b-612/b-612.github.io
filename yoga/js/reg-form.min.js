"use strict";!function(){var e=$(".registration__form"),t=function(){var e={MESSAGE:document.createElement("span"),FURTHER_ACTIONS:document.createElement("button"),TEXT_WRAPPER:document.createElement("div")};return $(e.MESSAGE).addClass("registration__message"),$(e.FURTHER_ACTIONS).addClass("registration__further-actions").attr("type","button"),$(e.TEXT_WRAPPER).addClass("registration__message-text-wrapper"),e},n=function(e,t,n){$(e.MESSAGE).text(t),$(e.FURTHER_ACTIONS).text(n),e.TEXT_WRAPPER.append(e.MESSAGE),e.TEXT_WRAPPER.append(e.FURTHER_ACTIONS),window.util.fragment.append(e.TEXT_WRAPPER),$(".registration .container").append(window.util.fragment).fadeIn(300)},r=function(){$(".registration__further-actions").click(function(){!function(){console.log("Сработало");var e=$(".registration__send-icon, .registration__message-text-wrapper"),t=$(".registration__form")[0],n=$(".registration__form, .registration__title");e.fadeOut(300),window.setTimeout(function(){e.remove(),t.reset(),n.fadeIn(300)},300)}()})},a={URL:"https://echo.htmlacademy.ru/",METHOD:"POST",TIMEOUT:5e3,ON_SUCCESS:function(){var e=t(),a=$(".registration__send-icon");a.fadeOut(300),window.setTimeout(function(){a.removeClass("registration__send-icon--progress").addClass("registration__send-icon--success").fadeIn(300),n(e,"Ваша заявка была успешно отправлена","Отправить ещё одну заявку"),r()},300)},ON_ERROR:function(){var e=t(),a=$(".registration__send-icon");a.fadeOut(300),window.setTimeout(function(){a.removeClass("registration__send-icon--progress").addClass("registration__send-icon--error").fadeIn(300),n(e,"Что-то пошло не так...","Попробовать ещё раз"),r()},300)}};jQuery.validator.addMethod("checkMask",function(e,t){return/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(e)}),e.validate({errorElement:"span",errorClass:"registration__error-message",rules:{name:{required:!0,minlength:3},phone:{checkMask:!0}},messages:{name:{required:"Пожалуйста, укажите Ваше имя",minlength:"Имя не может быть короче 3-х символов"},phone:{required:"Введите, пожалуйста, Ваш номер телефона",checkMask:"Введите правильный номер телефона"}}}),$('.registration__input[name="phone"]').mask("+7 (999) 999-99-99",{autoclear:!1}),e.on("submit",function(t){if(t.preventDefault(),""!==$(".registration__input[name=name]").val()&&""!==$(".registration__input[name=phone]").val()){var n=$(".registration__form").validate().invalid;n[Object.keys(n)[0]]||(s=$(".registration .container"),o=s.height(),_=s.children(),d=document.createElement("div"),s.height(o),_.fadeOut(300),$(d).attr("class","registration__send-icon registration__send-icon--progress"),s.append(d),r=a,i=e.serializeArray(),$.ajax({url:r.URL,method:r.METHOD,timeout:r.TIMEOUT,data:i,dataType:"html",success:r.ON_SUCCESS,error:r.ON_ERROR}))}var r,i,s,o,_,d})}();