"use strict";!function(){var e=$(".registration__form"),t=function(){var e={MESSAGE:document.createElement("span"),FURTHER_ACTIONS:document.createElement("button"),TEXT_WRAPPER:document.createElement("div")};return $(e.MESSAGE).addClass("registration__message"),$(e.FURTHER_ACTIONS).addClass("registration__further-actions").attr("type","button"),$(e.TEXT_WRAPPER).addClass("registration__message-text-wrapper"),e},r=function(e,t,r){$(e.MESSAGE).text(t),$(e.FURTHER_ACTIONS).text(r),e.TEXT_WRAPPER.append(e.MESSAGE),e.TEXT_WRAPPER.append(e.FURTHER_ACTIONS),window.util.fragment.append(e.TEXT_WRAPPER),$(".registration .container").append(window.util.fragment).fadeIn(300)},n=function(){$(".registration__further-actions").click(function(){var e,t,r;e=$(".registration__send-icon, .registration__message-text-wrapper"),t=$(".registration__form")[0],r=$(".registration__form, .registration__title"),e.fadeOut(300),setTimeout(function(){e.remove(),t.reset(),r.fadeIn(300),$(".registration .container").removeAttr("style")},300)})},a={URL:"https://echo.htmlacademy.ru/",METHOD:"POST",TIMEOUT:5e3,ON_SUCCESS:function(){var e=t(),a=$(".registration__send-icon");a.fadeOut(300),setTimeout(function(){a.removeClass("registration__send-icon--progress").addClass("registration__send-icon--success").fadeIn(300),r(e,"Ваша заявка была успешно отправлена","Отправить ещё одну заявку"),n()},300)},ON_ERROR:function(){var e=t(),a=$(".registration__send-icon");a.fadeOut(300),setTimeout(function(){a.removeClass("registration__send-icon--progress").addClass("registration__send-icon--error").fadeIn(300),r(e,"Что-то пошло не так...","Попробовать ещё раз"),n()},300)}};jQuery.validator.addMethod("checkMask",function(e,t){return/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(e)}),e.validate({errorElement:"span",errorClass:"registration__error-message",rules:{name:{required:!0,minlength:3},phone:{checkMask:!0}},messages:{name:{required:"Пожалуйста, укажите Ваше имя",minlength:"Имя не может быть короче 3-х символов"},phone:{required:"Введите, пожалуйста, Ваш номер телефона",checkMask:"Введите правильный номер телефона"}}}),$('.registration__input[name="phone"]').mask("+7 (999) 999-99-99",{autoclear:!1}),e.on("submit",function(t){if(t.preventDefault(),""!==$(".registration__input[name=name]").val()&&""!==$(".registration__input[name=phone]").val()){var r=$(".registration__form").validate().invalid;r[Object.keys(r)[0]]||(s=$(".registration .container"),o=s.height(),_=s.children(),d=document.createElement("div"),s.height(o),_.fadeOut(300),$(d).attr("class","registration__send-icon registration__send-icon--progress"),s.append(d),n=a,i=e.serializeArray(),$.ajax({url:n.URL,method:n.METHOD,timeout:n.TIMEOUT,data:i,dataType:"html",success:n.ON_SUCCESS,error:n.ON_ERROR}))}var n,i,s,o,_,d})}();